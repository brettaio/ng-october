{"ast":null,"code":"import { Subject } from 'rxjs';\nimport { debounceTime, distinctUntilChanged, switchMap } from 'rxjs/operators';\nimport { PackageSearchService } from './package-search.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./package-search.service\";\nimport * as i2 from \"@angular/common\";\nfunction PackageSearchComponent_li_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\")(1, \"strong\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \" - \");\n    i0.ɵɵelementStart(4, \"em\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const package_r1 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\", package_r1.name, \" v.\", package_r1.version, \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(package_r1.description);\n  }\n}\nexport class PackageSearchComponent {\n  search(packageName) {\n    this.searchText$.next(packageName);\n  }\n  ngOnInit() {\n    this.packages$ = this.searchText$.pipe(debounceTime(500), distinctUntilChanged(), switchMap(packageName => this.searchService.search(packageName, this.withRefresh)));\n  }\n  constructor(searchService) {\n    this.searchService = searchService;\n    this.withRefresh = false;\n    this.searchText$ = new Subject();\n  }\n  toggleRefresh() {\n    this.withRefresh = !this.withRefresh;\n  }\n  getValue(event) {\n    return event.target.value;\n  }\n  static #_ = this.ɵfac = function PackageSearchComponent_Factory(t) {\n    return new (t || PackageSearchComponent)(i0.ɵɵdirectiveInject(i1.PackageSearchService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: PackageSearchComponent,\n    selectors: [[\"app-package-search\"]],\n    features: [i0.ɵɵProvidersFeature([PackageSearchService])],\n    decls: 12,\n    vars: 4,\n    consts: [[\"type\", \"text\", \"id\", \"name\", \"placeholder\", \"Search\", 3, \"keyup\"], [\"type\", \"checkbox\", \"id\", \"refresh\", 3, \"checked\", \"click\"], [\"for\", \"refresh\"], [4, \"ngFor\", \"ngForOf\"]],\n    template: function PackageSearchComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"h2\");\n        i0.ɵɵtext(1, \"Search Npm Packages\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(2, \"p\")(3, \"em\");\n        i0.ɵɵtext(4, \"Searches when typing stops. Caches for 30 seconds.\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(5, \"input\", 0);\n        i0.ɵɵlistener(\"keyup\", function PackageSearchComponent_Template_input_keyup_5_listener($event) {\n          return ctx.search(ctx.getValue($event));\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"input\", 1);\n        i0.ɵɵlistener(\"click\", function PackageSearchComponent_Template_input_click_6_listener() {\n          return ctx.toggleRefresh();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"label\", 2);\n        i0.ɵɵtext(8, \"with refresh\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"ul\");\n        i0.ɵɵtemplate(10, PackageSearchComponent_li_10_Template, 6, 3, \"li\", 3);\n        i0.ɵɵpipe(11, \"async\");\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"checked\", ctx.withRefresh);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(11, 2, ctx.packages$));\n      }\n    },\n    dependencies: [i2.NgForOf, i2.AsyncPipe],\n    styles: [\"input[_ngcontent-%COMP%] { margin-bottom: .5rem; }\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcGFja2FnZS1zZWFyY2gvcGFja2FnZS1zZWFyY2guY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFFBQVEsb0JBQW9CLEVBQUUiLCJzb3VyY2VzQ29udGVudCI6WyJpbnB1dCB7IG1hcmdpbi1ib3R0b206IC41cmVtOyB9Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n}","map":{"version":3,"names":["Subject","debounceTime","distinctUntilChanged","switchMap","PackageSearchService","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate2","package_r1","name","version","ɵɵtextInterpolate","description","PackageSearchComponent","search","packageName","searchText$","next","ngOnInit","packages$","pipe","searchService","withRefresh","constructor","toggleRefresh","getValue","event","target","value","_","ɵɵdirectiveInject","i1","_2","selectors","features","ɵɵProvidersFeature","decls","vars","consts","template","PackageSearchComponent_Template","rf","ctx","ɵɵlistener","PackageSearchComponent_Template_input_keyup_5_listener","$event","PackageSearchComponent_Template_input_click_6_listener","ɵɵtemplate","PackageSearchComponent_li_10_Template","ɵɵproperty","ɵɵpipeBind1"],"sources":["c:\\brettaio\\ng-http\\src\\app\\package-search\\package-search.component.ts","c:\\brettaio\\ng-http\\src\\app\\package-search\\package-search.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\n\nimport { Observable, Subject } from 'rxjs';\nimport { debounceTime, distinctUntilChanged, switchMap } from 'rxjs/operators';\n\nimport { NpmPackageInfo, PackageSearchService } from './package-search.service';\n\n@Component({\n  selector: 'app-package-search',\n  templateUrl: './package-search.component.html',\n  styles: ['input { margin-bottom: .5rem; }'],\n  providers: [ PackageSearchService ]\n})\nexport class PackageSearchComponent implements OnInit {\n  withRefresh = false;\n  packages$!: Observable<NpmPackageInfo[]>;\n  private searchText$ = new Subject<string>();\n\n  search(packageName: string) {\n    this.searchText$.next(packageName);\n  }\n\n  ngOnInit() {\n    this.packages$ = this.searchText$.pipe(\n      debounceTime(500),\n      distinctUntilChanged(),\n      switchMap(packageName =>\n        this.searchService.search(packageName, this.withRefresh))\n    );\n  }\n\n  constructor(private searchService: PackageSearchService) { }\n\n\n  toggleRefresh() { this.withRefresh = ! this.withRefresh; }\n\n  getValue(event: Event): string {\n    return (event.target as HTMLInputElement).value;\n  }\n}\n","<h2>Search Npm Packages</h2>\n<p><em>Searches when typing stops. Caches for 30 seconds.</em></p>\n<input type=\"text\" (keyup)=\"search(getValue($event))\" id=\"name\" placeholder=\"Search\"/>\n<input type=\"checkbox\" id=\"refresh\" [checked]=\"withRefresh\" (click)=\"toggleRefresh()\">\n<label for=\"refresh\">with refresh</label>\n\n<ul>\n  <li *ngFor=\"let package of packages$ | async\">\n    <strong>{{package.name}} v.{{package.version}}</strong> -\n    <em>{{package.description}}</em>\n  </li>\n</ul>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}